export default {
  diggy: ["åˆ†ã‹ã£ã¦ã‚“ã ã‚ï¼Ÿï¾ï¾Ÿï½²ï½½", "ã‚¢ ã‚¢ãƒ©ãƒ©ãƒ©ã‚¡ ã‚¢ ã‚¢ã‚¡ï¼", "ç¬‘ã„æ­¢ã¾ã‚“ã­ã‡ã‚ˆ"],
  reply: ["ã©ã†ã‹ã—ã¾ã—ãŸã‹ï¼Ÿ", "ã¯ã„ï¼", "ã¯ã„ï¼ãƒ­ã‚³ã§ã™ã‚ˆï¼", "ãƒ­ã‚³ã§ã™ï¼", "ãªã‚“ã§ã™ã‹ã€œï¼Ÿãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ï¼"],
  command: {
    "ã¿ãã˜": fortune,
  },
  answer: {
    "ping": ":ping_pong:\npongã§ã™ï¼",
    "ã‚³ãƒãƒ³ãƒ‰": "`!help` ã¨å…¥åŠ›ã—ã¦ã¿ã¦ãã ã•ã„ï¼",
    "ã©ã†ã—ãŸ|ã©ã†ã‹ã—ãŸ|ã©ã†ãªã„ã—ãŸ": ["ã©ã†ã—ãŸã‚‚ã€ã“ã†ã—ãŸã‚‚ãªã„ã§", "ã©ã†ã—ãŸã‚‚ã€ã“ã†ã—ãŸã‚‚ãªã„ã§ã™ï¼"],
    "ä½•ã‹ã‚ã£ãŸã®ã‹": ["ä½•ã‹ã‚ã£ãŸã®ã‹ã€ã˜ã‚ƒãªã„ã§","ä½•ã‹ã‚ã£ãŸã®ã‹ã€ã˜ã‚ƒãªã„ã§ã™ï¼"],
    "ãŠã¯ã‚ˆ": "ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ï¼",
    "ã“ã‚“ã«ã¡ã¯": "ã“ã‚“ã«ã¡ã¯ã€ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ï¼",
    "ã“ã‚“ã°ã‚“": "ã“ã‚“ã°ã‚“ã¯ã€ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ï¼",
    "ãŠã‚„ã™ã¿": "ãŠã‚„ã™ã¿ãªã•ã„ã€ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ï¼",
    "ãƒã‚¤ãƒã‚¤|ã•ã‚ˆãªã‚‰|ã•ã‚ˆã†ãªã‚‰|ã¾ãŸ(ã­|ãª)|ã˜ã‚ƒ.*(ã­|ãª)": "ãƒã‚¤ãƒã‚¤ã§ã™ã€ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼",
    "ã»ã‚ã¦|è¤’ã‚ã¦|ã§ããŸ|å‡ºæ¥ãŸ": ["ã‚³ãƒ³ã‚°ãƒ©ãƒƒãƒãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ï¼", "ãƒãƒ¼ãƒ™ãƒ©ã‚¹ã§ã™ï¼", "ãƒ•ã‚¡ãƒ³ã‚¿ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§ã™ï¼", "ã‚¢ãƒ¡ã‚¤ã‚¸ãƒ³ã‚°ã§ã™ï¼", "ã‚¨ã‚¯ã‚»ãƒ¬ãƒ³ãƒˆã§ã™ï¼"],
    "ã‹ã‚ã„|å¯æ„›|ã‚«ãƒ¯ã‚¤|ãˆã‚‰ã„|å‰|ã™ã”|å‡„|æµçŸ³|ã•ã™ãŒ|ã™ã|å¥½ã": "ãˆã¸ã¸ã€‚ã‚µãƒ³ã‚¯ã‚¹ã§ã™ï½",
    "ã‚¢ãƒ›|ã‚ã»|é˜¿å‘†|é¦¬é¹¿|ãƒã‚«|ã°ã‹|ã†ã‚“ã¡|ã†ã‚“ã“|ã‚¦ãƒ³ãƒ|ã‚¦ãƒ³ã‚³|ã‚¯ã‚½|ãã|ç³|ãƒœã‚±|ã¼ã‘|ã‚«ã‚¹|ã¯ã’|ãƒã‚²|æ’æ³„|ã‚²ãƒ­|åç€‰": ["ã²ã©ã„ã§ã™ï¼", "ã²ã©ã„ã§ã™ã‚ˆï¼ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ï¼"],
    "ã‚ã‘ãŠã‚|ã‚ã‘ã¾ã—ã¦|æ˜ã‘ã¾ã—ã¦": "ãƒãƒƒãƒ”ãƒ¼ãƒ‹ãƒ¥ãƒ¼ã‚¤ãƒ¤ãƒ¼ã§ã™ã€ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ï¼",
  }
}

export async function fortune(msg) {
  const weight = {
    ssr: 0.05,
    sr: 0.35,
    r: 0.6,
  }
  const mikuji = [
    { unsei: "> \[**å¤§å‰**\]", comment: "\nã‚¨ã‚¯ã‚»ãƒ¬ãƒ³ãƒˆã§ã™ï¼", rarity: "r" },
    { unsei: "> \[**å‰**\]", comment: "\nã‚°ãƒ¬ã‚¤ãƒˆã§ã™ï¼", rarity: "r" },
    { unsei: "> \[**ä¸­å‰**\]", comment: "\nãƒ™ãƒªãƒ¼ã‚°ãƒƒãƒ‰ã§ã™ï¼", rarity: "r" },
    { unsei: "> \[**å°å‰**\]", comment: "\nã‚°ãƒƒãƒ‰ã§ã™ï¼", rarity: "r" },
    { unsei: "> \[**æœ«å‰**\]", comment: "\nãƒŠã‚¤ã‚¹ã§ã™ï¼", rarity: "r" },
    { unsei: "> \[**å‡¶**\]", comment: "\nãƒãƒƒãƒ‰ã§ã™ã­â€¦â€¦", rarity: "sr" },
    { unsei: "> \[**å¤§å‡¶**\]", comment: "\nãƒ†ãƒªãƒ–ãƒ«ã§ã™â€¦â€¦", rarity: "sr" },
    { unsei: "> \[**å¤§ã€…å‰**\]", comment: "\nã‚¢ãƒ¡ã‚¤ã‚¸ãƒ³ã‚°ã§ã™ï¼", rarity: "sr" },
    { unsei: "> \[**ãƒãƒ¥ãƒ‘å‰**\]", comment: "\nãƒ©ãƒƒã‚­ãƒ¼ã§ã™â€¦â€¦ï¼Ÿ", rarity: "sr" },
    { unsei: "> \[**å´–å‰**\]", comment: "\nãƒ©ãƒƒã‚­ãƒ¼ãªã‚“ã§ã™ã‹ã­â€¦â€¦ï¼Ÿ", rarity: "sr" },
    { unsei: "> \[**ç™¾ä¸‡å‰**\]", comment: "\nãƒ¯ãƒ³ãƒ€ãƒ•ãƒ«ã§ã™ï¼", rarity: "sr" },
    { unsei: "> \[**ä»¤å’Œ**\]", comment: "\nğŸ¤”", rarity: "ssr" },
    { unsei: "> \[**ãƒ­ã‚³å‰**\]", comment: "\nãƒ•ã‚¡ãƒ³ã‚¿ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§ã™ï¼", rarity: "ssr" },
    { unsei: "> \[**ã´ã‚‡ã‚“å‰**\]", comment: "\nâ€¦â€¦èª°ã§ã™ã‹ï¼Ÿ", rarity: "ssr" },
  ]
  const random = async loop =>{
    const randomNumber = Math.random()
    let filter

    if (randomNumber <= weight.ssr) {
      filter = "ssr"
    } else if (randomNumber <= weight.sr) {
      filter = "sr"
    } else {
      filter = "r"
    }

    const byRarity = []

    for (const item of mikuji) {
      if (item.rarity === filter) {
        byRarity.push({ unsei: item.unsei, comment: item.comment })
      }
    }

    const marge = []

    if (loop) {
      for (const item of byRarity) {
        marge.push(item.unsei)
      }
    } else {
      for (const item of byRarity) {
        marge.push(item.unsei + item.comment)
      }
    }

    msg.channel.send(marge[Math.floor(Math.random() * marge.length)])
  }

  if (/\d/.test(msg.content)) {
    const times = msg.content.replace(/[^0-9]/g, "")
    if (times > 10) times = 10
    for (let i = 0;i < times;i++) {
      random(true)
    }
  } else {
    random(false)
  }

}
